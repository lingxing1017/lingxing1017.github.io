<!DOCTYPE html>
<!--[if lte IE 8 ]>
<html class="ie" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<![endif]-->
<!--[if (gte IE 9)|!(IE)]><!-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<!--<![endif]-->

<head>
  <title>Debian9.5 ä¸‹ Samba é…ç½®è¯´æ˜ | X</title>
  <!-- Meta data -->
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" >
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="generator" content="X">
    <meta name="author" content="LingXing">
    <meta name="description" content="the self-cultivation of the programmer" />
    <meta name="keywords" content="" />

    <!-- Favicon, (keep icon in root folder) -->
    <link rel="Shortcut Icon" href="/img/favicon.ico" type="image/ico">

    <link rel="alternate" href="/atom.xml" title="X" type="application/atom+xml">
    <link rel="stylesheet" href="/css/all.css" media="screen" type="text/css">
	
    <link rel="stylesheet" href="/highlightjs/googlecode.css" type="text/css">
    
    

    <!-- Custom stylesheet, (add custom styles here, always load last) -->
    <!-- Load our stylesheet for IE8 -->
    <!--[if IE 8]>
    <link rel="stylesheet" type="text/css" href="/css/ie8.css" />
    <![endif]-->

    <!-- Google Webfonts (Monserrat 400/700, Open Sans 400/600) -->
    <link href='//fonts.googleapis.com/css?family=Montserrat:400,700' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:400,600' rel='stylesheet' type='text/css'>

    <!-- Load our fonts individually if IE8+, to avoid faux bold & italic rendering -->
    <!--[if IE]>
    <link href='http://fonts.googleapis.com/css?family=Montserrat:400' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Montserrat:700' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:600' rel='stylesheet' type='text/css'>
    <![endif]-->

    <!-- jQuery | Load our jQuery, with an alternative source fallback to a local version if request is unavailable -->
    <script src="/js/jquery-1.11.1.min.js"></script>
    <script>window.jQuery || document.write('<script src="js/jquery-1.11.1.min.js"><\/script>')</script>

    <!-- Load these in the <head> for quicker IE8+ load times -->
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="/js/html5shiv.min.js"></script>
    <script src="/js/respond.min.js"></script>
    <![endif]-->










  
  
  

  
  <style>.col-md-8.col-md-offset-2.opening-statement img{display:none;}</style>
</head>

<!--
<body class="post-template">
-->
<body id="index" class="lightnav animsition">

      <!-- ============================ Off-canvas navigation =========================== -->

    <div class="sb-slidebar sb-right sb-style-overlay sb-momentum-scrolling">
        <div class="sb-close" aria-label="Close Menu" aria-hidden="true">
            <img src="/img/close.png" alt="Close"/>
        </div>
        <!-- Lists in Slidebars -->
        <ul class="sb-menu">
            <li><a href="/" class="animsition-link" title="Home">HOME</a></li>
            <li><a href="/archives" class="animsition-link" title="Archives">archives</a></li>
            <!-- Dropdown Menu -->
			 
            
        	<li>
        		<a class="sb-toggle-submenu">CATEGORIES<span class="sb-caret"></span></a>
            	<ul class="sb-submenu">
				  	
				    <li><a href="/categories/android/" class="animsition-link">android<small>(1)</small></a></li>
				    
				    <li><a href="/categories/debian/" class="animsition-link">debian<small>(30)</small></a></li>
				    
				    <li><a href="/categories/kali/" class="animsition-link">kali<small>(1)</small></a></li>
				    
				    <li><a href="/categories/macos/" class="animsition-link">macos<small>(50)</small></a></li>
				    
				    <li><a href="/categories/test/" class="animsition-link">test<small>(1)</small></a></li>
				    
				    <li><a href="/categories/win10/" class="animsition-link">win10<small>(63)</small></a></li>
				    
				</ul>
        	</li>
	
            
            <li>
                <a class="sb-toggle-submenu">TAGS<span class="sb-caret"></span></a>
                <ul class="sb-submenu">
                    
                    <li><a href="/tags/Debian-ä¸ªæ€§åŒ–/" class="animsition-link">Debian ä¸ªæ€§åŒ–<small>(5)</small></a></li>
                    
                    <li><a href="/tags/Debian-é—®é¢˜/" class="animsition-link">Debian é—®é¢˜<small>(1)</small></a></li>
                    
                    <li><a href="/tags/Kali-ä½¿ç”¨/" class="animsition-link">Kali ä½¿ç”¨<small>(1)</small></a></li>
                    
                    <li><a href="/tags/Win10-ä¸ªæ€§åŒ–/" class="animsition-link">Win10 ä¸ªæ€§åŒ–<small>(9)</small></a></li>
                    
                    <li><a href="/tags/bat/" class="animsition-link">bat<small>(4)</small></a></li>
                    
                    <li><a href="/tags/c/" class="animsition-link">c++<small>(2)</small></a></li>
                    
                    <li><a href="/tags/case/" class="animsition-link">case<small>(1)</small></a></li>
                    
                    <li><a href="/tags/ci/" class="animsition-link">ci<small>(1)</small></a></li>
                    
                    <li><a href="/tags/docker/" class="animsition-link">docker<small>(1)</small></a></li>
                    
                    <li><a href="/tags/git/" class="animsition-link">git<small>(13)</small></a></li>
                    
                    <li><a href="/tags/gnome/" class="animsition-link">gnome<small>(2)</small></a></li>
                    
                    <li><a href="/tags/grub/" class="animsition-link">grub<small>(1)</small></a></li>
                    
                    <li><a href="/tags/hardware/" class="animsition-link">hardware<small>(1)</small></a></li>
                    
                    <li><a href="/tags/hexo/" class="animsition-link">hexo<small>(2)</small></a></li>
                    
                    <li><a href="/tags/macOS/" class="animsition-link">macOS<small>(3)</small></a></li>
                    
                    <li><a href="/tags/net/" class="animsition-link">net<small>(7)</small></a></li>
                    
                    <li><a href="/tags/npm/" class="animsition-link">npm<small>(1)</small></a></li>
                    
                    <li><a href="/tags/python/" class="animsition-link">python<small>(19)</small></a></li>
                    
                    <li><a href="/tags/reg/" class="animsition-link">reg<small>(3)</small></a></li>
                    
                    <li><a href="/tags/sh/" class="animsition-link">sh<small>(37)</small></a></li>
                    
                    <li><a href="/tags/software/" class="animsition-link">software<small>(5)</small></a></li>
                    
                    <li><a href="/tags/sql/" class="animsition-link">sql<small>(1)</small></a></li>
                    
                    <li><a href="/tags/ssh/" class="animsition-link">ssh<small>(6)</small></a></li>
                    
                    <li><a href="/tags/system/" class="animsition-link">system<small>(12)</small></a></li>
                    
                    <li><a href="/tags/vim/" class="animsition-link">vim<small>(1)</small></a></li>
                    
                    <li><a href="/tags/ä¿®å¤-Win10/" class="animsition-link">ä¿®å¤ Win10<small>(4)</small></a></li>
                    
                    <li><a href="/tags/å®‰è£…-Win10/" class="animsition-link">å®‰è£… Win10<small>(1)</small></a></li>
                    
                    <li><a href="/tags/å°æŠ€å·§/" class="animsition-link">å°æŠ€å·§<small>(1)</small></a></li>
                    
                    <li><a href="/tags/è®¤è¯†-Win10/" class="animsition-link">è®¤è¯† Win10<small>(1)</small></a></li>
                    
                </ul>
            </li>
            
            
            <li>
                <a class="sb-toggle-submenu">LINKS<span class="sb-caret"></span></a>
                <ul class="sb-submenu">
                    
                    <li><a target="_blank" rel="noopener" href="https://lingxing1017.party/" class="animsition-link">L</a></li>
                    
                </ul>
            </li>
            
        </ul>
        <!-- Lists in Slidebars -->
        <ul class="sb-menu secondary">
            
            <li><a href="javascript:;" class="popup-trigger" title="Search">SEARCH</a></li>
            
            <li><a href="mailto:lingxing1017@gmail.com" title="Email" class="animsition-link">EMAIL</a></li>
            <li><a href="/about.html" class="animsition-link" title="About">ABOUT</a></li>
        </ul>
    </div>
    
    <!-- ============================ END Off-canvas navigation =========================== -->

    <!-- ============================ #sb-site Main Page Wrapper =========================== -->

    <div id="sb-site">
        <!-- #sb-site - All page content should be contained within this id, except the off-canvas navigation itself -->

        <!-- ============================ Header & Logo bar =========================== -->

        <div id="navigation" class="navbar navbar-fixed-top">
            <div class="navbar-inner">
                <div class="container">
                    <!-- Nav logo -->
                    <div class="logo">
                        <a href="/" title="Logo" class="animsition-link">
                        
                        </a>
                    </div>
                    <!-- // Nav logo -->
                    <!-- Info-bar -->
                    <nav>
                        <ul class="nav">
                            <li><a href="/" class="animsition-link" title="Home">X</a></li>
                            <li class="nolink"><span>Always Creative</span></li>
                            
                            
                            
                            
                            
                            
                            <li><a href="mailto:lingxing1017@gmail.com" title="Email" target="_blank">ğŸ“§</a></li>
                            
                            
                            <li><a href="javascript:;" class="popup-trigger" title="Search">ğŸ”</a></li>
                            
                            <li class="nolink">Welcome</li>
                        </ul>
                    </nav>
                    <!--// Info-bar -->
                </div>
                <!-- // .container -->
                <div class="learnmore sb-toggle-right">More</div>
                <button type="button" class="navbar-toggle menu-icon sb-toggle-right" title="More">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar before"></span>
                <span class="icon-bar main"></span>
                <span class="icon-bar after"></span>
                </button>
            </div>
            <!-- // .navbar-inner -->
        </div>

        <!-- ============================ Header & Logo bar =========================== -->

        <!-- ============================ Hero Image =========================== -->

        <section id="hero" class="scrollme">
            <div class="container-fluid element-img" style="background: url(/img/1.jpg) no-repeat center center fixed;background-size: cover">
                <div class="row">
                    <div class="col-xs-12 col-sm-8 col-sm-offset-2 col-md-8 col-md-offset-2 vertical-align cover boost text-center">
                        <div class="center-me animateme" data-when="exit" data-from="0" data-to="0.6" data-opacity="0" data-translatey="100">
                            <div>
                            	
                                <h2>å¾—ä¹‹æˆ‘å¹¸  å¤±ä¹‹æˆ‘å‘½</h2>
                                <p></p>
				    			
                                <h2></h2>
                                <p>when someone abandons youï¼Œit is him that gets loss because he lost someone who truly loves him but you just lost one who doesnâ€™t love you.</p>
				    			

                            </div>
                        </div>
                    </div>
                    <!-- // .col-md-12 -->
                </div>
                <div class="herofade beige-dk"></div>
            </div>
        </section>

        <!-- Height spacing helper -->
        <div class="heightblock"></div>
        <!-- // End height spacing helper -->

        <!-- ============================ END Hero Image =========================== -->
      
<section id="intro">
    <div class="container">
        <div class="row col-md-offset-2">
            <div class="col-md-8">
    			<span class="post-meta">
      <time datetime="2020-06-01T14:12:49.000Z" itemprop="datePublished">
          2020-06-01
      </time>
    
    
    | 
    <a href='/tags/Debian-ä¸ªæ€§åŒ–/'>Debian ä¸ªæ€§åŒ–</a>
    
    
</span>
                <h1>Debian9.5 ä¸‹ Samba é…ç½®è¯´æ˜</h1>
            </div>
        </div>
        <div class="col-md-8 col-md-offset-2">
      		<p>åœ¨è¿™ä¸ªéŸ³ä¹ç‰ˆæƒçº·ä¹±çš„æ—¶ä»£ï¼Œæƒ³å¬ä¸€é¦–æ­Œç€å®ä¸å®¹æ˜“ï¼Œä¸æ˜¯ä»è¿™ä¸ª app æ‰¾ï¼Œå°±æ˜¯ä»é‚£ä¸ª app è¯•å¬ï¼Œæƒ³è¦ä¸‹è½½è¿˜å¾—æ”¶è´¹ï¼Œæ”¶è´¹ä¸å¯æ€•ï¼Œå¯æ€•çš„æ˜¯å¼€äº†ä¼šå‘˜è¿˜æœ‰å…¶ä»–çš„é¢å¤–æ”¶è´¹é¡¹ç›®ï¼Œäºæ˜¯å°±æƒ³åœ¨è‡ªå·±çš„ä½å¤„æ­å»ºä¸€ä¸ªæœ¬åœ°çš„éŸ³ä¹æ’­æ”¾æœåŠ¡ï¼Œæ­£å¥½æ‰‹è¾¹æœ‰ä¸ª debianï¼Œé‰´äºå·¥ä½œç”¨çš„éƒ½æ˜¯ macï¼Œæ­£å¥½æŠŠå®ƒå½“æˆè‡ªå·±çš„æœåŠ¡ç«¯ã€‚å¯ä»¥æ’­æ”¾æœåŠ¡ç«¯éŸ³ä¹çš„è½¯ä»¶æ•°ä¸èƒœæ•°ï¼Œè€Œ smb å¾€å¾€æ˜¯å…¶ä¸­ä¸€ä¸ªè¿æ¥æœåŠ¡ç«¯çš„æ–¹å¼</p>
<p>åœ¨ debian ä¸Šæˆ–è€…è¯´åœ¨ Linux ä¸Šï¼Œæ¯”è¾ƒå‡ºåçš„å°±æ˜¯ Samba äº†ï¼Œæ¥ä¸‹æ¥å°±æ˜¯è§è¯ Samba çš„æ—¶åˆ»</p>
<span id="more"></span>
<p>åœ¨æ­£å¼å¼€å§‹è§è¯ä¹‹å‰ï¼Œç®€å•æä¸€ä¸‹ smbï¼ˆServer Message Blockï¼‰ç½‘ç»œé€šä¿¡åè®®ï¼Œå®ƒæä¾›æ–‡ä»¶å…±äº«ï¼Œç½‘ç»œæµè§ˆï¼Œæ‰“å°æœåŠ¡ä»¥åŠç½‘ç»œä¸Šçš„è¿›ç¨‹é—´é€šä¿¡</p>
<p>Samba æ˜¯ä¸€å¥—ç¨‹åºï¼Œå…¶ä¸­æœ€é‡è¦çš„ä¸¤ä¸ªè¿›ç¨‹æ˜¯ nmbd å’Œ smbdï¼š</p>
<ol>
<li>smbdï¼šæä¾› SMB/CIFS æœåŠ¡ï¼ˆæ–‡ä»¶å…±äº«å’Œæ‰“å°ï¼‰çš„å®ˆæŠ¤è¿›ç¨‹ï¼Œä½¿ç”¨ SMB åè®®ä¸å®¢æˆ·è¿›è¡Œè¿æ¥ï¼Œå®Œæˆç”¨æˆ·è®¤è¯ï¼Œæƒé™ç®¡ç†å’Œæ–‡ä»¶å…±äº«ä»»åŠ¡</li>
<li>nmbdï¼šæä¾› NetBIOS åç§°æœåŠ¡çš„å®ˆæŠ¤è¿›ç¨‹ï¼Œå¯ä»¥å¸®åŠ©å®¢æˆ·ç«¯å®šä½æœåŠ¡å™¨å’ŒåŸŸï¼Œç›¸å½“äº WindowsNT ä¸­çš„ Wins æœåŠ¡å™¨ï¼Œå¦‚æœåªæ˜¯å•çº¯çš„å…±äº«æ–‡ä»¶å¯ä»¥å…³é—­è¿™ä¸ªæœåŠ¡ï¼Œè¿™æ ·å°±ä¸ç”¨åœ¨é˜²ç«å¢™ä¸­å¼€å‘ 137. 138 ç«¯å£ï¼Œä½†æ˜¯åœ¨ Windows ä¸­ â€œæ¡Œé¢â€ ä¸Šçš„ â€œç½‘ç»œâ€ é‡Œä¸ä¼šåœ¨æ˜¾ç¤ºå…±äº«çš„ä¸»æœºï¼Œåªèƒ½é€šè¿‡ â€œè¿è¡Œâ€ æ‰“å¼€ \IP çš„æ–¹å¼è¿æ¥åˆ°å…±äº«çš„ç›®å½•</li>
</ol>
<p>SAMBA æ‰€éœ€çš„è½¯ä»¶ï¼š</p>
<ol>
<li>sambaï¼šè¿™ä¸ªè½¯ä»¶ä¸»è¦åŒ…å«äº†SAMBAçš„ä¸»è¦æœåŠ¡ç¨‹åºï¼ˆsmbdåŠnmbdï¼‰ï¼ŒSAMBAç›¸å…³çš„æ–‡ä»¶ï¼Œä»¥åŠå…¶å®ƒä¸SAMBAç›¸å…³çš„logrotateé…ç½®æ–‡ä»¶åŠå¼€æœºé»˜è®¤é€‰é¡¹æ–‡ä»¶ç­‰</li>
<li>samba-commonï¼šè¿™ä¸ªè½¯ä»¶ä¸»è¦æä¾›äº† SAMBA çš„ä¸»è¦é…ç½®æ–‡ä»¶ï¼ˆsmb.confï¼‰ï¼Œsmb.conf è¯­æ³•æ£€éªŒçš„æµ‹è¯•ç¨‹åº (testparm) ç­‰</li>
<li>smbclientï¼šè¿™ä¸ªè½¯ä»¶åˆ™æä¾›äº†å½“ Linux åšä¸º SAMBA Client ç«¯æ—¶ï¼Œæ‰€éœ€è¦çš„å·¥å…·æŒ‡ä»¤ï¼Œä¾‹å¦‚ smbclient å‘½ä»¤ç”¨äºæŸ¥çœ‹ Windows å…±äº«æ–‡ä»¶ç­‰</li>
</ol>
<h3 id="æŸ¥çœ‹-nmbd-å’Œ-smbd-æœåŠ¡çš„çŠ¶æ€ï¼Œå¹¶è®¾ç½®å¼€æœºå¯åŠ¨">æŸ¥çœ‹ nmbd å’Œ smbd æœåŠ¡çš„çŠ¶æ€ï¼Œå¹¶è®¾ç½®å¼€æœºå¯åŠ¨</h3>
<ol>
<li>
<p>æŸ¥çœ‹æœåŠ¡çŠ¶æ€ï¼Œå¦‚æœæ²¡æœ‰å¯åŠ¨å¯åŠ¨ä»–</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo systemctl status nmbd.service</span><br><span class="line">$ sudo systemctl status smbd.service</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>è®¾ç½®æœåŠ¡å™¨å¼€æœºå¯åŠ¨</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo systemctl <span class="built_in">enable</span> nmbd.service</span><br><span class="line">$ sudo systemctl <span class="built_in">enable</span> smbd.service</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="Samba-æœåŠ¡å™¨é…ç½®">Samba æœåŠ¡å™¨é…ç½®</h3>
<p>åœ¨å®‰è£…äº† Samba æœåŠ¡è½¯ä»¶åï¼Œä¼šè‡ªåŠ¨åœ¨ Linux ç³»ç»Ÿä¸­ç”Ÿæˆä¸€ç³»åˆ—çš„é…ç½®æ–‡ä»¶ï¼Œäº†è§£å®ƒä»¬çš„ç”¨é€”æ˜¯é…ç½® Samba æœåŠ¡å™¨æ‰€å¿…é¡»çš„</p>
<p>ä¸»è¦é…ç½®æ–‡ä»¶ <code>/etc/Samba/smb.conf</code></p>
<p>è¿™æ˜¯ Samba æœåŠ¡çš„ä¸»é…ç½®æ–‡ä»¶ï¼Œæ–‡ä»¶ç”±ä¸€ç³»åˆ—æ®µå’Œé€‰é¡¹æ„æˆï¼Œä¸€ä¸ªæ®µç”±ä¸€å¯¹æ–¹æ‹¬å·ä¸­çš„æ®µåå¼€å§‹ï¼Œç›´åˆ°ä¸‹ä¸€ä¸ªæ®µåç»“æŸï¼Œä¸»è¦ç”±å…¨å±€è®¾ç½®ï¼ˆGlobal Settingsï¼‰å’Œå…±äº«å®šä¹‰ï¼ˆShare Definitionsï¼‰ä¸¤éƒ¨åˆ†ç»„æˆã€‚å…¶ä¸­å…¨å±€è®¾ç½®å®šä¹‰äº†å¯¹å½±å“æ•´ä¸ªSambaç³»ç»Ÿè¿è¡Œçš„å…¨å±€é€‰é¡¹ï¼Œç”¨äºè®¾ç½®æ•´ä¸ªç³»ç»Ÿçš„è§„åˆ™ï¼Œå¦‚æœåœ¨å…¶ä»–æ®µä¸­æ²¡æœ‰å†å¯¹è¿™äº›é€‰é¡¹è¿›è¡Œé‡æ–°è®¾ç½®çš„è¯ï¼Œå°±ä»¥å…¨å±€é€‰é¡¹ä¸ºä¸»ï¼šå…±äº«å®šä¹‰åˆ™æ˜¯å¯¹ç³»ç»Ÿä¸­å…±äº«èµ„æºè¿›è¡Œå®šä¹‰ï¼Œè¯¥éƒ¨åˆ†å¯ä»¥ç”±å¤šä¸ªæ®µç»„æˆï¼Œå…¶ä¸­å¸¸è§çš„åŒ…æ‹¬ï¼šç”¨æˆ·ä¸»ç›®å½•æ®µï¼Œå…±äº«ç›®å½•å’Œæ‰“å°æœºæ®µï¼Œæ¯ä¸ªæ®µä¸­å¯ä»¥å†å®šä¹‰è¯¦ç»†çš„å…±äº«é€‰é¡¹ã€‚smb.conf æ–‡ä»¶çš„æ ¼å¼å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; Global Settings &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</span><br><span class="line">[global]      #å…¨å±€é€‰é¡¹  </span><br><span class="line">#&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; Share Definitions &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</span><br><span class="line">[homes]       #å…±äº«é€‰é¡¹</span><br><span class="line"></span><br><span class="line">[printers]    #å…±äº«é€‰é¡¹</span><br></pre></td></tr></table></figure>
<p>smb.conf é…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨ <code>;</code>å’Œ <code>#</code>ä½œä¸ºæ³¨é‡Šç¬¦ï¼Œå‡¡æ˜¯ä½¿ç”¨è¿™ä¸¤ä¸ªç¬¦å·å¼€å¤´çš„è¡Œéƒ½ä¼šè¢« Samba è§†ä¸ºæ³¨é‡Šè¡Œè€Œå¿½ç•¥å¤„ç†ï¼Œè¿™ä¸ªé…ç½®æ–‡ä»¶ä¸­ï¼Œå¤§å°å†™æ˜¯æ²¡å…³ç³»çš„ï¼Œå› ä¸º Windows ä¸åˆ†å¤§å°å†™</p>
<h3 id="å¸¸ç”¨çš„å…¨å±€é€‰é¡¹åŠè¯´æ˜å¦‚ä¸‹æ‰€ç¤º">å¸¸ç”¨çš„å…¨å±€é€‰é¡¹åŠè¯´æ˜å¦‚ä¸‹æ‰€ç¤º</h3>
<p>å…ˆè¯´ä¸€ä¸‹ samba å®šä¹‰çš„å˜é‡ï¼š</p>
<ul>
<li>%S = å½“å‰æœåŠ¡åï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰</li>
<li>%P = å½“å‰æœåŠ¡çš„æ ¹ç›®å½•ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰</li>
<li>%u = å½“å‰æœåŠ¡çš„ç”¨æˆ·åï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰</li>
<li>%g = å½“å‰ç”¨æˆ·è¯´åœ¨çš„ä¸»å·¥ä½œç»„</li>
<li>%U = å½“å‰å¯¹è¯çš„ç”¨æˆ·å</li>
<li>%G = å½“å‰å¯¹è¯çš„ç”¨æˆ·çš„ä¸»å·¥ä½œç»„</li>
<li>%H = å½“å‰æœåŠ¡çš„ç”¨æˆ·çš„ Home ç›®å½•</li>
<li>%v = Samba æœåŠ¡çš„ç‰ˆæœ¬å·</li>
<li>%h = è¿è¡Œ Samba æœåŠ¡æœºå™¨çš„ä¸»æœºå</li>
<li>%m = å®¢æˆ·æœºçš„ NETBIOS åç§°</li>
<li>%L = æœåŠ¡å™¨çš„ NETBIOS åç§°</li>
<li>%M = å®¢æˆ·æœºçš„ä¸»æœºå</li>
<li>%N = NIS æœåŠ¡å™¨å</li>
<li>%p = NIS æœåŠ¡çš„ Home ç›®å½•</li>
<li>%R = è¯´é‡‡ç”¨çš„åè®®ç­‰çº§(å€¼å¯ä»¥æ˜¯ CORE, COREPLUS, LANMAN1, LANMAN2ï¼ŒNT1)</li>
<li>%d = å½“å‰æœåŠ¡è¿›ç¨‹çš„ ID</li>
<li>%a = å®¢æˆ·æœºçš„ç»“æ„ï¼ˆåªèƒ½è¯†åˆ«å‡ é¡¹ï¼šSambaï¼ŒWfWgï¼ŒWinNTï¼ŒWin95ï¼‰</li>
<li>%I = å®¢æˆ·æœºçš„ IP</li>
<li>%T = å½“å‰æ—¥æœŸå’Œæ—¶é—´</li>
</ul>
<ol>
<li>
<p>workgroup</p>
<blockquote>
<p>è¯¥é€‰é¡¹è®¾ç½® Samba æœåŠ¡å™¨æ‰€å±å·¥ä½œç»„åç§°ï¼Œé€šè¿‡ç½‘ä¸Šé‚»å±…å¯ä»¥ä»è¯¥å·¥ä½œç»„ä¸­æ‰¾åˆ°è¯¥ Samba æœåŠ¡å™¨ã€‚é»˜è®¤è®¾ç½®å¦‚ä¸‹ï¼š</p>
</blockquote>
   <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">workgroup &#x3D; WORKGROUP</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>wins support</p>
<blockquote>
<p>è¯¥é€‰é¡¹è®¾ç½® Samba æœåŠ¡å™¨æ˜¯å¦ä½œä¸º WINS æœåŠ¡å™¨ã€‚å¦‚æœè¦å¯ç”¨è¯¥é€‰é¡¹ï¼Œåˆ™ä¸èƒ½è®¾ç½® wins server é€‰é¡¹ï¼Œé»˜è®¤è®¾ç½® (é»˜è®¤è¢«æ³¨é‡Šæ‰) å¦‚ä¸‹ï¼š</p>
</blockquote>
   <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#   wins support &#x3D; no</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>wins serve</p>
<blockquote>
<p>è¯¥é€‰é¡¹æŒ‡å®š WINS æœåŠ¡å™¨çš„ IP åœ°å€æˆ–ä¸»æœºåã€‚é»˜è®¤è®¾ç½® (é»˜è®¤è¢«æ³¨é‡Šæ‰) å¦‚ä¸‹ï¼š</p>
</blockquote>
   <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">;   wins server &#x3D; w.x.y.z</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>interfaces å’Œ bind interfaces only = yes</p>
<blockquote>
<p>å¦‚æœæœåŠ¡å™¨æœ‰å¤šä¸ª IP åœ°å€æˆ–ç½‘ç»œæ¥å£ï¼Œå¯ä»¥ä½¿ç”¨ interfaces é€‰é¡¹æŠŠ IP åœ°å€æˆ–ç½‘ç»œæ¥å£åˆ—å‡ºæ¥ã€‚å¦‚æœ bind interfaces only é€‰é¡¹è®¾ç½®ä¸º yesï¼Œåˆ™è¡¨ç¤º Samba å°†ç»‘å®šï¼ˆç›‘å¬ï¼‰interfaces é€‰é¡¹æ‰€è®¾ç½®çš„ IP åœ°å€æˆ–ç½‘ç»œæ¥å£ï¼Œåªé€šè¿‡è¿™ä¸ªäº› IP åœ°å€æˆ–ç½‘ç»œæ¥å£æä¾›æœåŠ¡ï¼Œé»˜è®¤è®¾ç½® (é»˜è®¤è¢«æ³¨é‡Šæ‰) å¦‚ä¸‹ï¼š</p>
</blockquote>
   <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">;   interfaces &#x3D; 127.0.0.0&#x2F;8 eth0</span><br><span class="line"></span><br><span class="line">;   bind interfaces only &#x3D; yes</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>dns proxy</p>
<blockquote>
<p>è¯¥é€‰é¡¹è®¾ç½®æ˜¯å¦å¯ç”¨ DNS ä»£ç†åŠŸèƒ½ï¼Œé»˜è®¤è®¾ç½®å¦‚ä¸‹ï¼š</p>
</blockquote>
   <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dns proxy &#x3D; no</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>log file</p>
<blockquote>
<p>è¯¥é€‰é¡¹ç”¨æ¥è®¾ç½® Samba æ—¥å¿—æ–‡ä»¶çš„å­˜æ”¾ä½ç½®å’Œæ–‡ä»¶åç§°ï¼Œè¿™ä¸ªé€‰é¡¹ä¸­çš„ .%m æ˜¯ Samba é…ç½®æ–‡ä»¶çš„ä¿ç•™å˜é‡ï¼Œè¡¨ç¤ºå®¢æˆ·ç«¯çš„ NetBIOS åç§°ã€‚é»˜è®¤è®¾ç½®å¦‚ä¸‹ï¼š</p>
</blockquote>
   <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">log file &#x3D; &#x2F;var&#x2F;log&#x2F;samba&#x2F;log.%m</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>max log size</p>
<blockquote>
<p>æ—¥å¿—æ–‡ä»¶æœ€å¤§èƒ½è¾¾åˆ°å¤šå°‘ Kbytesï¼Œå¦‚æœè¶…è¿‡è¯¥é™åˆ¶ï¼Œåˆ™ Samba è‡ªåŠ¨åœ¨å½“å‰çš„æ—¥å¿—æ–‡ä»¶ååé¢åŠ ä¸Š â€œ.oldâ€ ç„¶ååˆ›å»ºä¸€ä¸ªæ–°çš„æ—¥å¿—æ–‡ä»¶ç»§ç»­å†™å…¥ã€‚å¦‚æœä¸º 0 åˆ™è¡¨ç¤ºæ²¡æœ‰å¤§å°é™åˆ¶ã€‚é»˜è®¤è®¾ç½®å¦‚ä¸‹ï¼š</p>
</blockquote>
   <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">max log size &#x3D; 1000</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>syslog only</p>
<blockquote>
<p>è®¾ç½®Sambaåªé€šè¿‡syslogè¿›è¡Œæ—¥å¿—è®°å½•ã€‚é»˜è®¤è®¾ç½® (é»˜è®¤è¢«æ³¨é‡Šæ‰) å¦‚ä¸‹ï¼š</p>
</blockquote>
   <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#   syslog only &#x3D; no   </span><br></pre></td></tr></table></figure>
</li>
<li>
<p>syslog</p>
<blockquote>
<p>syslog çš„ æ—¥å¿—çº§ (0,err)(1,warning)(2,notice)(3,ifno)(4 æˆ–ä»¥ä¸Šï¼Œdebug)ã€‚é»˜è®¤è®¾ç½®å¦‚ä¸‹ï¼š</p>
</blockquote>
   <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">syslog &#x3D; 0</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>server role</p>
<blockquote>
<p>æœåŠ¡å™¨è§’è‰²ã€‚å®šä¹‰ Samba å°†ä»¥ä½•ç§æ¨¡å¼æ“ä½œã€‚å¯èƒ½çš„å€¼æ˜¯ â€œç‹¬ç«‹æœåŠ¡å™¨â€ã€â€œæˆå‘˜æœåŠ¡å™¨â€ã€â€œç»å…¸ä¸»åŸŸæœåŠ¡å™¨â€ã€â€œç»å…¸å¤‡ä»½åŸŸæ§åˆ¶å™¨â€ã€â€œæ´»åŠ¨ç›®å½•åŸŸæ§åˆ¶å™¨&quot;ï¼Œé»˜è®¤è®¾ç½®å¦‚ä¸‹ï¼š</p>
</blockquote>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">server role &#x3D; standalone server</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>passdb backend</p>
<blockquote>
<p>å¯†ç æ•°æ®åº“æ ¼å¼ï¼Œä¹‹å‰ samba æœåŠ¡å™¨çš„ç”¨æˆ·ä¿¡æ¯éƒ½æ˜¯ä»¥æ•°æ®æ–‡ä»¶ä¿¡æ¯å­˜æ”¾ï¼Œä¸ºäº†åŠ å¿«é€Ÿåº¦ï¼Œç›®å‰å¯†ç æ–‡ä»¶å·²ç»è½¬ä¸ºä½¿ç”¨æ•°æ®åº“äº†ï¼Œé»˜è®¤çš„æ•°æ®åº“æ ¼å¼ä¸º <code>tdbsam</code>ï¼Œå­˜æ”¾åœ¨ <code>/var/lib/samba/private/passdb.tdb</code>ï¼Œæ—©æœŸä½¿ç”¨ smbpasswd å‘½ä»¤æ¥ç®¡ç†ç”¨æˆ·å¯†ç ï¼Œåæ¥ä½¿ç”¨ TDB æ•°æ®åº“ï¼Œå› æ­¤å»ºè®®ä½¿ç”¨æ–°çš„ pdbedit æŒ‡ä»¤æ¥ç®¡ç†ç”¨æˆ·æ•°æ®ï¼Œsmbpasswd ä»ç„¶å¯ä»¥ä½¿ç”¨ã€‚é»˜è®¤è®¾ç½®å¦‚ä¸‹ï¼š</p>
</blockquote>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">passdb backend &#x3D; tdbsam</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>obey pam restrictions</p>
<blockquote>
<p>åœ¨ Samba ä¸­é›†æˆ PAM çš„è®¿é—®æ§åˆ¶åŠŸèƒ½ã€‚é»˜è®¤è®¾ç½®å¦‚ä¸‹ï¼š</p>
</blockquote>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">obey pam restrictions &#x3D; yes</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>unix password sync = yes</p>
<blockquote>
<p>å½“ç”¨æˆ·æ”¹å˜ samba åŠ å¯†çš„å¯†ç æ—¶ï¼ŒSAMBA ä¼šè¯•ç€æ›´æ–° UNIX ç”¨æˆ·å¯†ç ã€‚é»˜è®¤è®¾ç½®å¦‚ä¸‹ï¼š</p>
</blockquote>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">unix password sync &#x3D; yes</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>passwd program</p>
<blockquote>
<p>æŒ‡å®šæ›´æ”¹å¯†ç çš„å‘½ä»¤ã€‚é»˜è®¤è®¾ç½®å¦‚ä¸‹ï¼š</p>
</blockquote>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">passwd program &#x3D; &#x2F;usr&#x2F;bin&#x2F;passwd %u</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>passwd chat</p>
<blockquote>
<p>æ›´æ”¹å¯†ç æ—¶çš„å¯¹è¯ã€‚é»˜è®¤è®¾ç½®å¦‚ä¸‹ï¼š</p>
</blockquote>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">passwd chat &#x3D; *Enter\snew\s*\spassword:* %n\n *Retype\snew\s*\spassword:* %n\n *password\supdated\ssuccessfully* .</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>pam password change</p>
<blockquote>
<p>ä¸º samba æ‰“å¼€ pam æ”¹å˜å¯†ç æ§åˆ¶æœºåˆ¶çš„æ”¯æŒã€‚é»˜è®¤è®¾ç½®å¦‚ä¸‹ï¼š</p>
</blockquote>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pam password change &#x3D; yes</span><br></pre></td></tr></table></figure>
<ol start="17">
<li>
<p>map to guest</p>
<blockquote>
<p>è¿™ä¸ªé…ç½®çš„æ„æ€æ˜¯å°†æ‰€æœ‰ samba ç³»ç»Ÿä¸»æœºæ‰€ä¸èƒ½æ­£ç¡®è¯†åˆ«çš„ç”¨æˆ·éƒ½æ˜ å°„æˆ guest ç”¨æˆ·ã€‚é»˜è®¤è®¾ç½®å¦‚ä¸‹ï¼š</p>
</blockquote>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">map to guest &#x3D; bad user</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>usershare max shares</p>
<blockquote>
<p>æœ€å¤§ç”¨æˆ·å…±äº«æ•°é‡ï¼Œ0è¡¨ç¤ºç¦ç”¨ç”¨æˆ·å…±äº«ã€‚é»˜è®¤è®¾ç½®å¦‚ä¸‹ï¼š</p>
</blockquote>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">usershare max shares &#x3D; 100</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>usershare allow guests</p>
<blockquote>
<p>æ˜¯å¦å…è®¸guestç”¨æˆ·è®¿é—®ï¼Œè¿™ç›¸å½“äºåœ¨å…±äº«å®šä¹‰ä¸­è®¾ç½®guest ok = yesé€‰é¡¹,æœ€ç»ˆä»¥å…±äº«ä¸­çš„è®¾ç½®ä¸ºå‡†ã€‚</p>
</blockquote>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">usershare allow guests &#x3D; yes</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>ä»¥ä¸‹æ˜¯ smb.conf é…ç½®æ–‡ä»¶ä¸­æ²¡æœ‰æåˆ°çš„ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡ testparm -v å‘½ä»¤æŸ¥çœ‹åˆ°é»˜è®¤è®¾ç½®ï¼Œå¦‚æœä¸ç¬¦åˆè‡ªå·±çš„å®é™…è®¾ç½®ï¼Œå¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­åŠ å…¥ç›¸åº”çš„é€‰é¡¹</p>
<ol start="20">
<li>
<p>netbios name = DEBIAN</p>
<blockquote>
<p>è®¾ç½® Samba Server çš„ NetBIOS åç§°ï¼Œåœ¨ â€œç½‘ä¸Šé‚»å±…â€ ä¸­æ˜¾ç¤ºçš„ä¸»æœºåï¼Œå¦‚æœä¸å¡«ï¼Œåˆ™é»˜è®¤ä¼šä½¿ç”¨è¯¥æœåŠ¡å™¨çš„ DNS åç§°çš„ç¬¬ä¸€éƒ¨åˆ†</p>
</blockquote>
</li>
<li>
<p>server string = Samba 4.5.12-Debian</p>
<blockquote>
<p>è®¾å®š Samba Server çš„æ³¨é‡Šï¼Œå¯ä»¥æ˜¯ä»»ä½•å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥ä¸å¡«ã€‚å® %v è¡¨ç¤ºæ˜¾ç¤º Samba çš„ç‰ˆæœ¬å·</p>
</blockquote>
</li>
<li>
<p>hosts allow = 127. 192.168.1. 192.168.10.1</p>
<blockquote>
<p>è®¾ç½®å…è®¸è¿æ¥åˆ° Samba Server çš„å®¢æˆ·ç«¯ï¼Œå¤šä¸ªå‚æ•°ä»¥ç©ºæ ¼éš”å¼€ã€‚å¯ä»¥ç”¨ä¸€ä¸ª IP è¡¨ç¤ºï¼Œä¹Ÿå¯ä»¥ç”¨ä¸€ä¸ªç½‘æ®µè¡¨ç¤ºã€‚è¿™é€‰é¡¹ä¹Ÿå¯ä»¥åœ¨å…±äº«æ®µèµ·ä½œç”¨ï¼Œåªå¯¹æŸä¸ªå…±äº«çš„ç›®å½•å•ç‹¬èµ·ä½œç”¨</p>
<p>hosts deny ä¸ hosts allow åˆšå¥½ç›¸å</p>
<p>ALL è¡¨ç¤ºæ‰€æœ‰ç”¨æˆ·ï¼Œä¾‹å¦‚ï¼šhosts allow = ALL</p>
</blockquote>
<blockquote>
<p>EXCEPT è¡¨ç¤ºæ’é™¤ï¼Œä¾‹å¦‚ï¼šå…è®¸é™¤ 192.168.1.100 ä»¥ä¸ºçš„æ‰€æœ‰ä¸»æœºè®¿é—®ï¼Œæ ¼å¼ä¸º hosts allow = ALL EXCEPT 192.168.1.100</p>
</blockquote>
</li>
<li>
<p>max connections = 0</p>
<blockquote>
<p>max connections ç”¨æ¥æŒ‡å®šè¿æ¥ Samba Server çš„æœ€å¤§è¿æ¥æ•°ç›®ã€‚å¦‚æœè¶…å‡ºè¿æ¥æ•°ç›®ï¼Œåˆ™æ–°çš„è¿æ¥è¯·æ±‚å°†è¢«æ‹’ç»ã€‚0 è¡¨ç¤ºä¸é™åˆ¶</p>
</blockquote>
</li>
<li>
<p>deadtime = 0</p>
<blockquote>
<p>deadtime ç”¨æ¥è®¾ç½®æ–­æ‰ä¸€ä¸ªæ²¡æœ‰æ‰“å¼€ä»»ä½•æ–‡ä»¶çš„è¿æ¥çš„æ—¶é—´ã€‚å•ä½æ˜¯åˆ†é’Ÿï¼Œ0 ä»£è¡¨ Samba Server ä¸è‡ªåŠ¨åˆ‡æ–­ä»»ä½•è¿æ¥</p>
</blockquote>
</li>
<li>
<p>time server = yes/no</p>
<blockquote>
<p>time server ç”¨æ¥è®¾ç½®è®© nmdb æˆä¸º windows å®¢æˆ·ç«¯çš„æ—¶é—´æœåŠ¡å™¨</p>
</blockquote>
</li>
<li>
<p>security = user</p>
<blockquote>
<p>è®¾ç½®ç”¨æˆ·è®¿é—® Samba Server çš„éªŒè¯æ–¹å¼ï¼Œä¸€å…±æœ‰å››ç§éªŒè¯æ–¹å¼ï¼š</p>
<ol>
<li>userï¼šSamba Server å…±äº«ç›®å½•åªèƒ½è¢«æˆæƒçš„ç”¨æˆ·è®¿é—®ï¼Œç”± Samba Server è´Ÿè´£æ£€æŸ¥è´¦å·å’Œå¯†ç çš„æ­£ç¡®æ€§ã€‚è´¦å·å’Œå¯†ç è¦åœ¨æœ¬Samba Server ä¸­å»ºç«‹</li>
<li>domainï¼šåŸŸå®‰å…¨çº§åˆ«ï¼Œä½¿ç”¨ä¸»åŸŸæ§åˆ¶å™¨ (PDC) æ¥å®Œæˆè®¤è¯</li>
<li>autoï¼šè¿™æ˜¯ Samba ä¸­çš„é»˜è®¤å®‰å…¨è®¾ç½®ï¼ŒSamba ä¼šé€šè¿‡æœåŠ¡å™¨è§’è‰²å‚æ•° (å¦‚æœè®¾ç½®) æ¥ç¡®å®šå®‰å…¨æ¨¡å¼</li>
<li>adsï¼šåœ¨æ­¤æ¨¡å¼ä¸‹ï¼ŒSamba å°†å……å½“ ADS é¢†åŸŸä¸­çš„åŸŸæˆå‘˜</li>
</ol>
<p>åœ¨ samba4 ä¸­ share å’Œ server éªŒè¯æ–¹å¼å·²è¢«å¼ƒç”¨</p>
</blockquote>
</li>
<li>
<p>encrypt passwords = yes/no</p>
<blockquote>
<p>æ˜¯å¦å°†è®¤è¯å¯†ç åŠ å¯†ã€‚å› ä¸ºç°åœ¨ windows æ“ä½œç³»ç»Ÿéƒ½æ˜¯ä½¿ç”¨åŠ å¯†å¯†ç ï¼Œæ‰€ä»¥ä¸€èˆ¬è¦å¼€å¯æ­¤é¡¹ã€‚ä¸è¿‡é…ç½®æ–‡ä»¶é»˜è®¤å·²å¼€å¯</p>
</blockquote>
</li>
<li>
<p>username map = /etc/samba/smbusers</p>
<blockquote>
<p>ç”¨æ¥å®šä¹‰ç”¨æˆ·åæ˜ å°„ï¼Œæ¯”å¦‚å¯ä»¥å°† root æ¢æˆ administratorã€admin ç­‰ã€‚ä¸è¿‡è¦äº‹å…ˆåœ¨ smbusers æ–‡ä»¶ä¸­å®šä¹‰å¥½ã€‚æ¯”å¦‚ï¼šroot = administrator adminï¼Œè¿™æ ·å°±å¯ä»¥ç”¨ administrator æˆ– admin è¿™ä¸¤ä¸ªç”¨æˆ·æ¥ä»£æ›¿ root ç™»é™† Samba Serverï¼Œæ›´è´´è¿‘ windows ç”¨æˆ·çš„ä¹ æƒ¯</p>
</blockquote>
</li>
<li>
<p>guest account = nobody</p>
<blockquote>
<p>ç”¨æ¥è®¾ç½® Samba ä¸­ guest ç”¨æˆ·å¯¹ç”¨çš„ç³»ç»Ÿç”¨æˆ·å</p>
</blockquote>
</li>
<li>
<p>load printers = yes/no</p>
<blockquote>
<p>è®¾ç½®æ˜¯å¦åœ¨å¯åŠ¨ Samba æ—¶å°±å…±äº«æ‰“å°æœºã€‚ç°è¡Œå‡ ä¹éƒ½æ˜¯ç½‘ç»œæ‰“å°æœºäº†ï¼Œé»˜è®¤å…³é—­å°±å¯ä»¥ï¼Œè¿™é‡Œä¹Ÿä¸è®¨è®ºæ‰“å°æœºçš„é—®é¢˜</p>
</blockquote>
</li>
<li>
<p>smb ports = 139 445</p>
<blockquote>
<p>æŒ‡å®šæœåŠ¡ç›‘å¬ SMB æµé‡çš„ç«¯å£</p>
</blockquote>
</li>
</ol>
<h3 id="å¸¸ç”¨çš„å…±äº«é€‰é¡¹åŠè¯´æ˜">å¸¸ç”¨çš„å…±äº«é€‰é¡¹åŠè¯´æ˜</h3>
<p>åœ¨è¯¥æ®µä¸­æŒ‡å®šäº†ä¸€ä¸ªé€šè¿‡ Samba è¿›è¡Œå…±äº«çš„ç›®å½•ï¼Œå®šä¹‰ç”¨æˆ·è®¿é—®è¯¥ç›®å½•çš„å„ç§è®¾ç½®ï¼Œæ›´å¤šçš„è®¾ç½®å¯ä»¥å‚è€ƒ<a target="_blank" rel="noopener" href="https://www.samba.org/samba/docs/man/">å®˜ç½‘</a>ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<ol>
<li>
<p>[å…±äº«åç§°]</p>
<blockquote>
<p>è¿™ä¸ªå…±äº«åç§°å¾ˆé‡è¦ï¼Œå®ƒæ˜¯ä¸€ä¸ªä»£å·è€Œå·²ï¼Œç”¨æˆ·åœ¨ â€œç½‘ä¸Šé‚»å±…â€ ä¸­æ‰€çœ‹åˆ°çš„å…±äº«ç›®å½•å</p>
</blockquote>
</li>
<li>
<p>comment = ä»»æ„å­—ç¬¦ä¸²</p>
<blockquote>
<p>comment æ˜¯å¯¹è¯¥å…±äº«çš„æè¿°ï¼Œå¯ä»¥æ˜¯ä»»æ„å­—ç¬¦ä¸²</p>
</blockquote>
</li>
<li>
<p>path = å…±äº«ç›®å½•è·¯å¾„</p>
<blockquote>
<p>path ç”¨æ¥æŒ‡å®šå…±äº«ç›®å½•çš„è·¯å¾„ã€‚å¯ä»¥ç”¨ %u. %m è¿™æ ·çš„å®æ¥ä»£æ›¿è·¯å¾„é‡Œçš„ unix ç”¨æˆ·å’Œå®¢æˆ·æœºçš„ Netbios åï¼Œç”¨å®è¡¨ç¤ºä¸»è¦ç”¨äº [homes] å…±äº«åŸŸã€‚</p>
<p>ä¾‹å¦‚ï¼šå¦‚æœä¸æ‰“ç®—ç”¨ home æ®µåšä¸ºå®¢æˆ·çš„å…±äº«ï¼Œè€Œæ˜¯åœ¨ /home/share/ ä¸‹ä¸ºæ¯ä¸ª Linux ç”¨æˆ·ä»¥ä»–çš„ç”¨æˆ·åå»ºä¸ªç›®å½•ï¼Œä½œä¸ºä»–çš„å…±äº«ç›®å½•ï¼Œè¿™æ · path å°±å¯ä»¥å†™æˆï¼špath = /home/share/%uã€‚ç”¨æˆ·åœ¨è¿æ¥åˆ°è¿™å…±äº«æ—¶å…·ä½“çš„è·¯å¾„ä¼šè¢«ä»–çš„ç”¨æˆ·åä»£æ›¿ï¼Œè¦æ³¨æ„è¿™ä¸ªç”¨æˆ·åè·¯å¾„ä¸€å®šè¦å­˜åœ¨ï¼Œå¦åˆ™ï¼Œå®¢æˆ·æœºåœ¨è®¿é—®æ—¶ä¼šæ‰¾ä¸åˆ°ç½‘ç»œè·¯å¾„ã€‚åŒæ ·ï¼Œå¦‚æœä¸æ˜¯ä»¥ç”¨æˆ·æ¥åˆ’åˆ†ç›®å½•ï¼Œè€Œæ˜¯ä»¥å®¢æˆ·æœºæ¥åˆ’åˆ†ç›®å½•ï¼Œä¸ºç½‘ç»œä¸Šæ¯å°å¯ä»¥è®¿é—® samba çš„æœºå™¨éƒ½å„è‡ªå»ºä¸ªä»¥å®ƒçš„ netbios åçš„è·¯å¾„ï¼Œä½œä¸ºä¸åŒæœºå™¨çš„å…±äº«èµ„æºï¼Œå°±å¯ä»¥è¿™æ ·å†™ï¼špath = /home/share/%m</p>
</blockquote>
</li>
<li>
<p>browseable = yes/no</p>
<blockquote>
<p>browseable ç”¨æ¥æŒ‡å®šè¯¥å…±äº«æ˜¯å¦åœ¨ â€œç½‘ä¸Šé‚»å±…â€ ä¸­å¯è§</p>
</blockquote>
</li>
<li>
<p>writable = yes/no</p>
<blockquote>
<p>writable ç”¨æ¥æŒ‡å®šè¯¥å…±äº«è·¯å¾„æ˜¯å¦å¯å†™</p>
</blockquote>
</li>
<li>
<p>read only = yes/no</p>
<blockquote>
<p>è®¾ç½®å…±äº«ç›®å½•ä¸ºåªè¯»ï¼Œè¿™ä¸ªé€‰é¡¹å’Œ writable æ˜¯äº’æ–¥çš„ï¼Œæœ€å¥½ä¸è¦ä¸¤ä¸ªåŒæ—¶å‡ºç°å¦‚æœåŒæ—¶å‡ºç°ï¼Œé‚£ä¹ˆæœ€åå‡ºç°çš„é‚£ä¸ªè®¾ç½®ä¸ºä¸»è¦çš„è®¾ç½®</p>
</blockquote>
</li>
<li>
<p>available = yes/no</p>
<blockquote>
<p>available ç”¨æ¥æŒ‡å®šè¯¥å…±äº«èµ„æºæ˜¯å¦å¯ç”¨</p>
</blockquote>
</li>
<li>
<p>admin users = è¯¥å…±äº«çš„ç®¡ç†è€…</p>
<blockquote>
<p>admin users ç”¨æ¥æŒ‡å®šè¯¥å…±äº«çš„ç®¡ç†å‘˜ï¼ˆå¯¹è¯¥å…±äº«å…·æœ‰å®Œå…¨æ§åˆ¶æƒé™ï¼‰ã€‚åœ¨ samba 3.0 ä¸­ï¼Œå¦‚æœç”¨æˆ·éªŒè¯æ–¹å¼è®¾ç½®æˆ â€œsecurity=shareâ€ æ—¶ï¼Œæ­¤é¡¹æ— æ•ˆ</p>
<p>ä¾‹å¦‚ï¼šadmin users = bobyuanï¼Œjaneï¼ˆå¤šä¸ªç”¨æˆ·ä¸­é—´ç”¨é€—å·éš”å¼€ï¼‰</p>
</blockquote>
</li>
<li>
<p>valid users = å…è®¸è®¿é—®è¯¥å…±äº«çš„ç”¨æˆ·</p>
<blockquote>
<p>valid users ç”¨æ¥æŒ‡å®šå…è®¸è®¿é—®è¯¥å…±äº«èµ„æºçš„ç”¨æˆ·</p>
<p>ä¾‹å¦‚ï¼švalid users = bobyuanï¼Œ@bobï¼Œ@techï¼ˆå¤šä¸ªç”¨æˆ·æˆ–è€…ç»„ä¸­é—´ç”¨é€—å·éš”å¼€ï¼Œå¦‚æœè¦åŠ å…¥ä¸€ä¸ªç»„å°±ç”¨â€œ@+ç»„åâ€è¡¨ç¤ºï¼‰</p>
</blockquote>
</li>
<li>
<p>invalid users = ç¦æ­¢è®¿é—®è¯¥å…±äº«çš„ç”¨æˆ·</p>
<blockquote>
<p>invalid users ç”¨æ¥æŒ‡å®šä¸å…è®¸è®¿é—®è¯¥å…±äº«èµ„æºçš„ç”¨æˆ·</p>
<p>ä¾‹å¦‚ï¼šinvalid users = rootï¼Œ@bobï¼ˆå¤šä¸ªç”¨æˆ·æˆ–è€…ç»„ä¸­é—´ç”¨é€—å·éš”å¼€ï¼‰</p>
</blockquote>
</li>
<li>
<p>write list = å…è®¸å†™å…¥è¯¥å…±äº«çš„ç”¨æˆ·</p>
<blockquote>
<p>write list ç”¨æ¥æŒ‡å®šå¯ä»¥åœ¨è¯¥å…±äº«ä¸‹å†™å…¥æ–‡ä»¶çš„ç”¨æˆ·</p>
<p>ä¾‹å¦‚ï¼šwrite list = bobyuanï¼Œ@bob</p>
</blockquote>
</li>
<li>
<p>public = yes/no</p>
<blockquote>
<p>public ç”¨æ¥æŒ‡å®šè¯¥å…±äº«æ˜¯å¦å…è®¸ guest è´¦æˆ·è®¿é—®</p>
</blockquote>
</li>
<li>
<p>guest ok = yes/no</p>
<blockquote>
<p>æ„ä¹‰åŒ â€œpublicâ€</p>
</blockquote>
</li>
<li>
<p>create mask = 0700</p>
<blockquote>
<p>æŒ‡å®šç”¨æˆ·é€šè¿‡ Samba åœ¨è¯¥å…±äº«ç›®å½•ä¸­åˆ›å»ºæ–‡ä»¶çš„é»˜è®¤æƒé™ã€‚<code>0600</code> ä»£è¡¨åˆ›å»ºæ–‡ä»¶çš„æƒé™ä¸º <code>rw-------</code></p>
</blockquote>
</li>
<li>
<p>directory mask = 0700</p>
<blockquote>
<p>æŒ‡å®šç”¨æˆ·é€šè¿‡ Samba åœ¨è¯¥å…±äº«ç›®å½•ä¸­åˆ›å»ºç›®å½•çš„é»˜è®¤æƒé™ã€‚<code>0600</code> ä»£è¡¨åˆ›å»ºç›®å½•çš„æƒé™ä¸º <code>rwx------</code></p>
</blockquote>
</li>
</ol>
<h3 id="é…ç½®æ–‡ä»¶ç”Ÿæ•ˆä¸æ£€éªŒ">é…ç½®æ–‡ä»¶ç”Ÿæ•ˆä¸æ£€éªŒ</h3>
<p>ä¸å¤§éƒ¨åˆ†ç¨‹åºé…ç½®æ–‡ä»¶ä¸€æ ·ï¼Œsmb.comf æ–‡ä»¶è¢«ä¿®æ”¹åå¹¶ä¸ä¼šç«‹åˆ»ç”Ÿæ•ˆï¼Œéœ€è¦é‡å¯ smbd å’Œ nmbd æœåŠ¡ã€‚åœ¨å®Œæˆé…ç½®æ–‡ä»¶æˆ‘ä»¬éœ€è¦ç”¨ testparm å‘½ä»¤æ¥éªŒè¯æ–‡ä»¶çš„æ ¼å¼æ˜¯å¦æ­£ç¡®ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ testparm  <span class="comment"># å‚æ•° -vï¼šæŸ¥é˜…å®Œæ•´çš„å‚æ•°è®¾ç½®ï¼Œè¿åŒé»˜è®¤å€¼ä¹Ÿä¼šæ˜¾ç¤ºå‡ºæ¥</span></span><br><span class="line"></span><br><span class="line">$ testparm  <span class="comment"># è¿›è¡Œæ£€æµ‹</span></span><br><span class="line">Load smb config files from /etc/samba/smb.conf</span><br><span class="line">rlimit_max: increasing rlimit_max (1024) to minimum Windows <span class="built_in">limit</span> (16384)</span><br><span class="line">WARNING: The <span class="string">&quot;syslog&quot;</span> option is deprecated</span><br><span class="line">Processing section <span class="string">&quot;[homes]&quot;</span></span><br><span class="line">Processing section <span class="string">&quot;[printers]&quot;</span></span><br><span class="line">Processing section <span class="string">&quot;[print$]&quot;</span></span><br><span class="line">Loaded services file OK.  <span class="comment"># å¦‚æœæ ¼å¼æ²¡æœ‰é—®é¢˜å°†ä¸ä¼šçœ‹åˆ°ä»»ä½•é”™è¯¯ä¿¡æ¯ï¼Œå¦‚æœè¿™è¡Œçš„å‰é¢æœ‰ Unknown parameter encountered:å­—æ ·çš„æç¤ºå°±è¯´æ˜æœ‰é”™è¯¯</span></span><br><span class="line">Server role: ROLE_STANDALONE</span><br><span class="line"></span><br><span class="line">Press enter to see a dump of your service definitions  <span class="comment"># å›è½¦åå°†ä¼šæ˜¾ç¤º smb.conf æ–‡ä»¶å½“å‰çš„é…ç½®å†…å®¹</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœè¾“å‡ºä¸­æ²¡æœ‰ä»»ä½•é”™è¯¯æˆ–è­¦å‘Šä¿¡æ¯ï¼Œè¡¨ç¤ºæ–‡ä»¶æ ¼å¼æ²¡æœ‰é—®é¢˜ã€‚å¦åˆ™ï¼Œè¾“å‡ºç»“æœä¸­å°†ä¼šç»™å‡ºé”™è¯¯çš„åœ°æ–¹ä»¥åŠé”™è¯¯çš„åŸå› </p>
<p>é‡å¯æœåŠ¡ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ systemctl restart smbd.service</span><br><span class="line">$ systemctl restart nmbd.service</span><br></pre></td></tr></table></figure>
<h3 id="Samba-ç”¨æˆ·ç®¡ç†">Samba ç”¨æˆ·ç®¡ç†</h3>
<p>Samba çš„ç”¨æˆ·æ˜¯ä¸æ“ä½œç³»ç»Ÿçš„ç”¨æˆ·è”ç³»åœ¨ä¸€èµ·çš„ï¼Œåœ¨åˆ›å»º Samba ç”¨æˆ·å‰ï¼Œå¿…é¡»å…ˆæ·»åŠ ä¸€ä¸ªä¸ä¹‹åŒåçš„æ“ä½œç³»ç»Ÿç”¨æˆ·ã€‚ä¹Ÿå°±æ˜¯è¯´ Samba çš„ç”¨æˆ·å¿…é¡»æ˜¯æ“ä½œç³»ç»Ÿä¸­å·²ç»å­˜åœ¨çš„ç”¨æˆ·ï¼Œä½†ä¸¤è€…çš„å¯†ç å¯ä»¥ä¸ç›¸åŒã€‚åœ¨æ¥è¯´ä¸‹ç”¨æˆ·åœ¨ Windows ç³»ç»Ÿä¸‹é€šè¿‡ Samba è®¿é—® Linux ç³»ç»Ÿçš„æƒé™é—®é¢˜ï¼Œå½“éœ€è¦é€šè¿‡ Samba æ‰€æä¾›çš„åŠŸèƒ½æ¥è¿›è¡Œ Linux çš„è®¿é—®æ—¶ï¼ŒLinux ä¸Šé¢çš„æ–‡ä»¶æˆ–ç›®å½•æ˜¯å¦å¯è¯»å†™è¿˜è¦å–å†³äº Linux ç³»ç»Ÿä¸Šçš„ç”¨æˆ·æ˜¯å¦å¯¹è¯¥æ–‡ä»¶å¯è¯»å†™ï¼Œæ‰€ä»¥åœ¨ Windows ä¸Šè®¿é—® Samba æœåŠ¡å™¨æ—¶ï¼Œè¦çœ‹ Samba å¯¹åº”çš„ç”¨æˆ·å¯¹ Linux ç³»ç»Ÿçš„æ–‡ä»¶æ˜¯å¦å¯è¯»å†™ï¼ŒåŒæ—¶ Samba é…ç½®æ–‡ä»¶ä¹Ÿä¼šé™åˆ¶è¯»å†™æƒé™</p>
<p>ä¾‹å¦‚ï¼šå½“ Samba ç”¨æˆ· A è¦å¯¹ Linux ä¸Šé¢çš„Tæ–‡ä»¶è¿›è¡Œå†™çš„æ—¶å€™ï¼Œsmb.conf çš„é…ç½®æ–‡ä»¶ä¸­çš„å…±äº«è®¾ç½®è¦å…·æœ‰å¯å†™çš„æƒé™ï¼ŒA ç”¨æˆ·å¯¹åº”çš„ Linux ç”¨æˆ·ä¹Ÿè¦å¯¹Tæ–‡ä»¶æœ‰å†™çš„æƒé™</p>
<p>Samba ç”¨æˆ·é€šè¿‡ pdbedit å‘½ä»¤è¿›è¡Œç®¡ç†ã€‚å‘½ä»¤ç”¨æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ pdbedit</span><br><span class="line"><span class="comment"># å‚æ•°ï¼š</span></span><br><span class="line"><span class="comment">#  â€“a usernameï¼šæ–°å»º Samba è´¦æˆ·</span></span><br><span class="line"><span class="comment">#  â€“x usernameï¼šåˆ é™¤ Samba è´¦æˆ·</span></span><br><span class="line"><span class="comment">#  â€“Lï¼šåˆ—å‡º Samba ç”¨æˆ·åˆ—è¡¨ï¼Œè¯»å– passdb.tdb æ•°æ®åº“æ–‡ä»¶</span></span><br><span class="line"><span class="comment">#  â€“Lvï¼šåˆ—å‡º Samba ç”¨æˆ·åˆ—è¡¨çš„è¯¦ç»†ä¿¡æ¯</span></span><br><span class="line"><span class="comment">#  â€“c â€œ[D]â€ â€“u usernameï¼šæš‚åœè¯¥ Samba ç”¨æˆ·çš„è´¦å·</span></span><br><span class="line"><span class="comment">#  â€“c â€œ[]â€ â€“u usernameï¼šæ¢å¤è¯¥ Samba ç”¨æˆ·çš„è´¦å·</span></span><br></pre></td></tr></table></figure>
<p>ä¸¾ä¾‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ pdbedit -L  <span class="comment"># æŸ¥è¯¢ç›®å‰å·²ç»å­˜åœ¨çš„ Samba å¸å·</span></span><br><span class="line">laopi:1000:Laopi</span><br><span class="line"></span><br><span class="line">$ smbpasswd laopi  <span class="comment"># é€šè¿‡ smbpasswd å‘½ä»¤ä¿®æ”¹å¸å·å¯†ç </span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœè¦æ·»åŠ é¢å¤–çš„ Samba ç”¨æˆ·å¸å·ï¼Œè‹¥è¯¥å¸å·åŸæœ¬ä¸å­˜åœ¨ï¼Œåˆ™å…ˆä½¿ç”¨ useradd æ·»åŠ ç³»ç»Ÿå¸å·ï¼Œå†é€šè¿‡ pdbedit -a å‘½ä»¤æ·»åŠ  Samba ç”¨æˆ·å¸å·</p>
<h3 id="ç”¨æˆ·æ˜ å°„">ç”¨æˆ·æ˜ å°„</h3>
<p>ç”±äº Samba ç”¨æˆ·å¿…é¡»è¦ä¸æ“ä½œç³»ç»Ÿç”¨æˆ·åŒåï¼Œå‡ºäºç³»ç»Ÿå®‰å…¨æˆ–ä½¿ç”¨ä¹ æƒ¯çš„è€ƒè™‘ï¼Œå¯ä»¥æŠŠç”¨æˆ·æ˜ å°„ä¸º administrator ç”¨æˆ·æˆ– admin ç”¨æˆ·ï¼Œæ˜ å°„åå°±æ— éœ€åœ¨æ·»åŠ  administrator æˆ– admin ç”¨æˆ·äº†ï¼Œä¹Ÿå¯ä»¥é˜²æ­¢ Samba ç”¨æˆ·é€šè¿‡ Samba å¸å·æ¥çŒœæµ‹æ“ä½œç³»ç»Ÿç”¨æˆ·çš„ä¿¡æ¯ã€‚æ˜ å°„åçš„ç”¨æˆ·å…¶æƒé™å’Œå¯†ç éƒ½å’Œä¹‹å‰ä¸€æ ·ï¼Œæ˜ å°„æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ol>
<li>
<p>ç¼–è¾‘ smb.conf æ–‡ä»¶ï¼Œåœ¨ [global] éƒ¨åˆ†æ·»åŠ ç”¨æˆ·æ˜ å°„æ–‡ä»¶ï¼ˆè¯¥æ–‡ä»¶ç”±ç”¨æˆ·æ‰‹åŠ¨åˆ›å»ºï¼Œå¯ä»¥æŠŠä»–æ”¾åœ¨ç³»ç»Ÿå¯ä»¥è®¿é—®çš„ä»»ä½•ä½ç½®ï¼‰ï¼Œæ·»åŠ å†…å®¹å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
   <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">username map &#x3D; &#x2F;etc&#x2F;samba&#x2F;smbusers  # ä¸€èˆ¬æ–‡ä»¶éƒ½æ”¾åœ¨è¿™é‡Œ</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>æ‰‹åŠ¨åˆ›å»ºç”¨æˆ·æ˜ å°„æ–‡ä»¶ /etc/samba/smbusersï¼Œè¯¥æ–‡ä»¶çš„æ ¼å¼å¦‚ä¸‹ï¼š</p>
   <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Samba ç”¨æˆ·å¸å· &#x3D; éœ€è¦æ˜ å°„çš„ç”¨æˆ·åˆ—è¡¨  # åˆ—è¡¨ä¸­çš„ç”¨æˆ·åä¹‹é—´ä»¥ç©ºæ ¼è¿›è¡Œåˆ†å‰²ï¼Œå¦‚ä¸‹æ‰€ç¤º</span><br></pre></td></tr></table></figure>
<p>ä¸¾ä¾‹ï¼š</p>
   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ vim.tiny /etc/samba/smbusers</span><br><span class="line"></span><br><span class="line">laopi = administrator admin</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>é‡å¯ smbd å’Œ nmbd æœåŠ¡</p>
</li>
</ol>
<h3 id="é…ç½®å®ä¾‹">é…ç½®å®ä¾‹</h3>
<ol>
<li>
<p>ä¸éœ€è¦å¯†ç çš„å…±äº«ï¼Œæœ‰æ—¶å€™éœ€è¦å°†æŸä¸ªç›®å½•å…±äº«ç»™æ‰€æœ‰äººè®¿é—®ï¼Œè¦æ±‚ /home/share1 ç›®å½•æ‰€æœ‰äººéƒ½å¯ä»¥è¯»å†™ï¼Œ/home/share2 ç›®å½•æ‰€æœ‰äººåªè¯»ï¼Œéœ€è¦å…ˆæŠŠè¿™ä¸¤ä¸ªç›®å½•çš„æƒé™ç»™æˆ 777ï¼Œè¿™æ ·ä»»ä½•äººæ‰å¯ä»¥å¯¹ç›®å½•è¿›è¡Œæ“ä½œï¼Œsmb.conf é…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š</p>
   <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">#&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; Global Settings &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</span><br><span class="line"></span><br><span class="line">[global]</span><br><span class="line"></span><br><span class="line">workgroup &#x3D; WORKGROUP</span><br><span class="line"></span><br><span class="line">dns proxy &#x3D; no</span><br><span class="line"></span><br><span class="line">log file &#x3D; &#x2F;var&#x2F;log&#x2F;samba&#x2F;log.%m</span><br><span class="line"></span><br><span class="line">max log size &#x3D; 1000</span><br><span class="line"></span><br><span class="line">syslog &#x3D; 0</span><br><span class="line"></span><br><span class="line">panic action &#x3D; &#x2F;usr&#x2F;share&#x2F;samba&#x2F;panic-action %d</span><br><span class="line"></span><br><span class="line">server role &#x3D; standalone server</span><br><span class="line"></span><br><span class="line">passdb backend &#x3D; tdbsam</span><br><span class="line"></span><br><span class="line">obey pam restrictions &#x3D; yes</span><br><span class="line"></span><br><span class="line">unix password sync &#x3D; yes</span><br><span class="line"></span><br><span class="line">passwd program &#x3D; &#x2F;usr&#x2F;bin&#x2F;passwd %u</span><br><span class="line">passwd chat &#x3D; *Enter\snew\s*\spassword:* %n\n *Retype\snew\s*\spassword:* %n\n *password\supdated\ssuccessfully* .</span><br><span class="line"></span><br><span class="line">pam password change &#x3D; yes</span><br><span class="line"></span><br><span class="line">map to guest &#x3D; bad user                    #è¿™è¡Œå¾ˆé‡è¦å†³å®šä»»ä½•ç”¨æˆ·æ˜¯å¦å¯ä»¥è®¿é—®</span><br><span class="line"></span><br><span class="line">usershare allow guests &#x3D; yes               #è¿™è¡Œæ²¡ä»€ä¹ˆç”¨ä¸»è¦ç”±å…±äº«æ®µçš„è®¾ç½®å†³å®š</span><br><span class="line"></span><br><span class="line">netbios name &#x3D; SAMBA-DEBIAN                #è¿™è¡Œä¸Šé¢çš„éƒ½æ˜¯ç³»ç»Ÿé»˜è®¤é…ç½®çš„ä¿æŒä¸å˜å³å¯</span><br><span class="line"></span><br><span class="line">#&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; Share Definitions &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</span><br><span class="line"></span><br><span class="line">[share1]</span><br><span class="line">comment &#x3D; guest</span><br><span class="line">browseable &#x3D; yes</span><br><span class="line">path &#x3D; &#x2F;home&#x2F;share1</span><br><span class="line">available &#x3D; yes</span><br><span class="line">guest ok &#x3D; yes</span><br><span class="line">writable &#x3D; yes</span><br><span class="line">create mask &#x3D; 0700</span><br><span class="line">directory mask &#x3D; 0700</span><br><span class="line"></span><br><span class="line">[share2]</span><br><span class="line">comment &#x3D; guest</span><br><span class="line">browseable &#x3D; yes</span><br><span class="line">path &#x3D; &#x2F;home&#x2F;share2</span><br><span class="line">available &#x3D; yes</span><br><span class="line">guest ok &#x3D; yes</span><br><span class="line">read only &#x3D; yes</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="é˜²ç«å¢™è®¾ç½®">é˜²ç«å¢™è®¾ç½®</h3>
<p>Samba ä¸­é»˜è®¤ä¼šå¯ç”¨å¤šä¸ªç«¯å£ï¼Œè¿™åŒ…æ‹¬æ•°æ®ä¼ è¾“çš„ TCP ç«¯å£ 139ã€445ï¼Œä»¥åŠè¿›è¡Œ NetBIOS åç§°è§£æä¹‹ç±»å·¥ä½œçš„ UDP ç«¯å£ 137ã€138ï¼Œå¦‚æœåªæ˜¯ä¸ºäº†ä¼ è¾“æ•°æ®å¯ä»¥åªå¼€æ”¾ 445 ç«¯å£ï¼Œå‰ææ˜¯ smb ports = çš„é€‰é¡¹ä¸­æœ‰ 445 ç«¯å£ï¼Œä¹Ÿå¯ä»¥é…ç½® smb ports = 445ï¼Œè¿™æ · Samba å°±åªç›‘å¬ 445 ç«¯å£ï¼Œè¿™æ ·é…ç½®å®Œåœ¨ Windows ä¸­ â€œæ¡Œé¢â€ ä¸Šçš„ â€œç½‘ç»œâ€ é‡Œä¸ä¼šåœ¨æ˜¾ç¤ºå…±äº«çš„ä¸»æœºï¼Œåªèƒ½é€šè¿‡ â€œè¿è¡Œâ€ æ‰“å¼€ \IP çš„æ–¹å¼è¿æ¥åˆ°å…±äº«çš„ç›®å½•</p>
<p>æŸ¥çœ‹ smb ports é€‰é¡¹é»˜è®¤è®¾ç½®çš„ç«¯å£ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ testparm -v | grep port</span><br></pre></td></tr></table></figure>
<p>æŸ¥çœ‹Sambaç›‘å¬çš„ç«¯å£å·ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ netstat -tlunp | grep mbd</span><br></pre></td></tr></table></figure>
<h3 id="Linux-å®¢æˆ·ç«¯ä¸Šè®¿é—®">Linux å®¢æˆ·ç«¯ä¸Šè®¿é—®</h3>
<p>Linux å®¢æˆ·ç«¯ä¸Šè®¿é—® Windows ç³»ç»Ÿæˆ– Samba æœåŠ¡å™¨ä¸Šå…±äº«èµ„æºçš„æ–¹å¼ä¸»è¦æœ‰ä¸¤ç§ï¼Œå¯ä»¥ä½¿ç”¨ smbclient ç¨‹åºè®¿é—®å…±äº«èµ„æºï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ mount å‘½ä»¤æŠŠå…±äº«ç›®å½•æŒ‚è½½åˆ°æœ¬åœ°ç›®å½•ä¸Šä½¿ç”¨</p>
<ol>
<li>
<p>smbclient æ˜¯ Samba æ‰€æä¾›çš„ä¸€ä¸ªç±»ä¼¼äº FTP çš„å®¢æˆ·ç«¯ç¨‹åºï¼Œä½¿ç”¨ smbclient é“¾æ¥åˆ°å…±äº«çš„èµ„æºåï¼Œå¯ä»¥ä½¿ç”¨ lsï¼Œgetï¼Œput ç­‰ç±»ä¼¼äºFTPçš„å‘½ä»¤å¯¹å…±äº«èµ„æºè¿›è¡Œæ“ä½œï¼Œé¦–å…ˆè¦å®‰è£… smbclient ç¨‹åºï¼š</p>
   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ apt install smbclient</span><br></pre></td></tr></table></figure>
<p>smbclient å‘½ä»¤çš„æ ¼å¼å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ smbclient [é€‰é¡¹] //[address]/[å…±äº«ç›®å½•]</span><br><span class="line"><span class="comment"># è¯¥å‘½ä»¤å¸¸ç”¨çš„é€‰é¡¹åŠè¯´æ˜å¦‚ä¸‹æ‰€ç¤º</span></span><br><span class="line"><span class="comment">#  -I=IPï¼šè¿æ¥æŒ‡å®šçš„ IP åœ°å€</span></span><br><span class="line"><span class="comment">#  -L=Hostï¼šè·å–æŒ‡å®šå…±äº«èµ„æºåˆ—è¡¨</span></span><br><span class="line"><span class="comment">#  -p=Portï¼šæŒ‡å®šè¦è¿æ¥çš„å…±äº«èµ„æºæœåŠ¡å™¨ç«¯å£å·</span></span><br><span class="line"><span class="comment">#  -U=Usernameï¼šæŒ‡å®šè¿æ¥å…±äº«æœåŠ¡å™¨ä½¿ç”¨çš„ç”¨æˆ·å¸å·</span></span><br><span class="line"><span class="comment">#  -Nï¼šä¸è¦æ±‚è¾“å…¥å¯†ç </span></span><br><span class="line"><span class="comment">#  -?ï¼šæ˜¾ç¤ºå‘½ä»¤çš„å¸®åŠ©ä¿¡æ¯</span></span><br><span class="line"><span class="comment">#  -Vï¼šæ˜¾ç¤ºå‘½ä»¤çš„ç‰ˆæœ¬ä¿¡æ¯</span></span><br></pre></td></tr></table></figure>
<p>ä¾‹å¦‚ï¼šæŸ¥çœ‹å…±äº«æœåŠ¡å™¨ 192.168.1.30 ä¸Šçš„å…±äº«èµ„æºåˆ—è¡¨ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p>
   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ smbclient -L=192.168.1.30 -U administrator</span><br><span class="line">WARNING: The <span class="string">&quot;syslog&quot;</span> option is deprecated</span><br><span class="line">Enter administrator<span class="string">&#x27;s password:  # è¦æ±‚è¾“å…¥ administrator å¸å·çš„å¯†ç </span></span><br><span class="line"><span class="string">Domain=[VIRTUALBOX-PC] OS=[Windows 7 Ultimate 7601 Service Pack 1] Server=[Windows 7 Ultimate 6.1]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Sharename       Type      Comment</span></span><br><span class="line"><span class="string">---------       ----      -------</span></span><br><span class="line"><span class="string">ADMIN$          Disk      è¿œç¨‹ç®¡ç†</span></span><br><span class="line"><span class="string">C$              Disk      é»˜è®¤å…±äº«</span></span><br><span class="line"><span class="string">IPC$            IPC       è¿œç¨‹ IPC</span></span><br><span class="line"><span class="string">windd           Disk      </span></span><br><span class="line"><span class="string">Connection to 192.168.1.30 failed (Error NT_STATUS_RESOURCE_NAME_NOT_FOUND)</span></span><br><span class="line"><span class="string">NetBIOS over TCP disabled -- no workgroup available</span></span><br></pre></td></tr></table></figure>
<p>é€šè¿‡ä¸Šé¢çš„æŸ¥çœ‹å¯ä»¥çœ‹åˆ°å…±äº«çš„èµ„æºä¸º windd</p>
<p>é€šè¿‡ smbclient å‘½ä»¤ç™»å½•åˆ°å…±äº«ä¸»æœºèµ„æºï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p>
   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$ smbclient  //192.168.1.30/windd -U administrator</span><br><span class="line">WARNING: The <span class="string">&quot;syslog&quot;</span> option is deprecated</span><br><span class="line">Enter administrator<span class="string">&#x27;s password:</span></span><br><span class="line"><span class="string">Domain=[VIRTUALBOX-PC] OS=[Windows 7 Ultimate 7601 Service Pack 1] Server=[Windows 7 Ultimate 6.1]</span></span><br><span class="line"><span class="string">smb: \&gt;</span></span><br><span class="line"><span class="string"># åœ¨ smb: \&gt; ä¸‹é¢å…¶å®å°±æ˜¯åœ¨ //192.168.1.30/windd è¿™ä¸ªç›®å½•ä¸‹ï¼Œå¯ä»¥ä½¿ç”¨ lsï¼Œgetï¼Œput ç­‰å‘½ä»¤è¿›è¡Œæ•°æ®çš„ä¼ è¾“ï¼Œå¸¸ç”¨å‘½ä»¤å¦‚ä¸‹ï¼š</span></span><br><span class="line"><span class="string"># ?ï¼šåˆ—å‡ºæ‰€æœ‰å¯ä»¥ä½¿ç”¨çš„å‘½ä»¤</span></span><br><span class="line"><span class="string"># cdï¼šè¿œç¨‹å…±äº«ä¸»æœºä¸Šåˆ‡æ¢ç›®å½•</span></span><br><span class="line"><span class="string"># delï¼šåˆ é™¤æŸä¸ªæ–‡ä»¶</span></span><br><span class="line"><span class="string"># lcdï¼šæœ¬æœºä¸»æœºä¸Šåˆ‡æ¢ç›®å½•</span></span><br><span class="line"><span class="string"># lsï¼šæŸ¥çœ‹å½“å‰æ‰€åœ¨ç›®å½•çš„æ–‡ä»¶</span></span><br><span class="line"><span class="string"># getï¼šä¸‹è½½æ–‡ä»¶</span></span><br><span class="line"><span class="string"># putï¼š ä¸Šä¼ æ–‡ä»¶</span></span><br><span class="line"><span class="string"># rmï¼š åˆ é™¤æ–‡ä»¶</span></span><br><span class="line"><span class="string"># exitï¼šé€€å‡º</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>é€šè¿‡ mount å‘½ä»¤æŒ‚è½½å…±äº«ç›®å½•åˆ°æœ¬åœ°</p>
<p>åœ¨ä½¿ç”¨ smbclient å‘½ä»¤ä¸€ç‚¹ä¹Ÿä¸æ–¹ä¾¿ç›´è§‚ï¼Œå…¶å®é™¤äº† smbclientï¼ŒLinux å®¢æˆ·ç«¯ä¹Ÿå¯ä»¥åƒ NFS ä¸€æ ·ä½¿ç”¨ mount å‘½ä»¤æŠŠè¿œç¨‹çš„å…±äº«æ–‡ä»¶å¤¹æŒ‚è½½åˆ°æœ¬åœ°çš„ç›®å½•ä¸Šè¿›è¡Œä½¿ç”¨ã€‚æŒ‚è½½åå¯¹å…±äº«æ–‡ä»¶å¤¹çš„è®¿é—®å°±åƒæ“ä½œæœ¬åœ°ç›®å½•ä¸€æ ·æ–¹ä¾¿ã€‚é¦–å…ˆéœ€è¦å®‰è£… cifs-utils è½¯ä»¶åŒ…ï¼ˆä»¥åŠ cifs-utils ä¾èµ–çš„è½¯ä»¶åŒ…ï¼‰</p>
<p>æŒ‚è½½å‘½ä»¤å¦‚ä¸‹ï¼š</p>
   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ mount.cifs //[address]/[folder] -o user=[username] [mount point]</span><br><span class="line">$ mount -t cifs //[address]/[folder] -o user=[username] [mount point]</span><br><span class="line">$ mount -t cifs //[address]/[folder] -o domain=[domain_name],user=[username]  [mount point]</span><br><span class="line"><span class="comment"># [address] æ˜¯ windows çš„ IP åœ°å€ï¼Œ[folder] æ˜¯ windows ä¸‹çš„å…±äº«ç›®å½•ï¼Œ[username] æ˜¯ windows ä¸‹çš„è®¾ç½® folder å…±äº«æ—¶çš„ç”¨æˆ·ï¼Œå¦‚æœè¯¥ç”¨æˆ·ä½¿ç”¨åŸŸç®¡ç†ï¼ˆå¦‚ä¼ä¸šæˆ–ç»„ç»‡ç”¨æˆ·ï¼‰ï¼Œéœ€è¦è®¾ç½® domainï¼›[mount point] æ˜¯ Linux ç³»ç»Ÿä¸Šçš„æŒ‚åœ¨ç‚¹ï¼Œmount.cifs å‘½ä»¤å¯ä»¥å–ä»£ mount -t cifs å‘½ä»¤</span></span><br></pre></td></tr></table></figure>
<p>ä¸¾ä¾‹ï¼šå°†å…±äº«æ–‡ä»¶ windd æŒ‚è½½åˆ° linux ç³»ç»Ÿçš„ /mnt ç›®å½•ï¼Œå…±äº«ç”¨æˆ·ä¸º administrator</p>
   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ mount.cifs //192.168.1.27/windd -o user=administrator /mnt/</span><br><span class="line">Password <span class="keyword">for</span> administrator@//192.168.1.27/windd:  ********  <span class="comment"># è¿™é‡Œè¦æ±‚è¾“å…¥å…±äº«ç”¨æˆ· administrator çš„å¯†ç </span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<blockquote>
<p>either I will find a way, or I will make one.</p>
</blockquote>

            <div class="clearfix"></div>
            <hr class="nogutter">
        </div>
        <nav class="pagination" role="pagination">
    
    <a class="pull-left" href="/20200602-m25/" style="float: left;">
        â† brew å’Œ brew cask
    </a>
    
    
    <a class="pull-right" href="/20200531-d24/">
        NetworkManager éšæœºç”Ÿæˆ MAC åœ°å€ â†’
    </a>
    
</nav>

    </div>
</section>


      
<!-- ============================ Footer =========================== -->

<footer>
    <div class="container">
            <div class="copy">
                <p>
                    &copy; 2017<script>new Date().getFullYear()>2010&&document.write("-"+new Date().getFullYear());</script>, Content By LingXing. All Rights Reserved.
                </p>
                <p>Theme is TKL.</p>
            </div>
            <div class="social">
                <ul>
                    
                    
                    
                    
                    
                </ul>
            </div>
            <div class="clearfix"></div>
        </div>
</footer>
<!-- ============================ END Footer =========================== -->

      <!-- Load our scripts -->
        
<!-- Resizable 'on-demand' full-height hero -->
<script type="text/javascript">
    
    var resizeHero = function () {
        var hero = $(".cover,.heightblock"),
            window1 = $(window);
        hero.css({
            "height": window1.height()
        });
    };
    
    resizeHero();
    
    $(window).resize(function () {
        resizeHero();
    });
</script>
<script src="/js/plugins.min.js"></script><!-- Bootstrap core and concatenated plugins always load here -->
<script src="/js/jquery.flexslider-min.js"></script><!-- Flexslider plugin -->
<script src="/js/scripts.js"></script><!-- Theme scripts -->

<!-- Initiate flexslider plugin -->
<script type="text/javascript">
    $(document).ready(function($) {
      $('.flexslider').flexslider({
        animation: "fade",
        prevText: "",
        nextText: "",
        directionNav: true
      });
    });
</script>

      
            <style>
.local-search-popup {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  padding: 0;
  background: rgba(255, 255, 255, .9);
  color: #333;
  z-index: 9999;
  border-radius: 5px;
  overflow: scroll;
}
#local-search-input {
  width: 100%;
  border: none;
  outline: none;
  border-bottom: 1px solid #151515;
  background-color: initial;
}
.search-result-list {
  list-style: none;
  padding-left: 0;
}
.search-result-list > li {
  margin-top: 15px;
  border-bottom: 1px solid #ddd;
  transition: all ease .3s;
}
.search-result-list > li:hover {
  border-bottom: 1px solid gray;
}
.search-result-title {
  font-size: 16px;
}
.search-result {
  line-height: 20px;
}
.search-keyword {
  font-weight: normal;
  color: #c00;
}

@media (min-width: 890px) {
  .popup-btn-close {
    position: absolute;
    top: 15px;
    left: 35px;
    border: 1px solid #151515;
    padding: 0px 10px;
    border-top-left-radius: 8px;
    cursor: pointer;
    transition: all ease .3s;
  }
  .popup-btn-close:hover {
    background: #151515;
    opacity: .9;
    color: #fff;
  }
}
@media (max-width: 890px) {
  .popup-btn-close {
    font-size: 0;
    position: fixed;
    right: 20px;
    bottom: 50px;
    width: 50px;
    height: 50px;
    background: #fff;
    border-radius: 50%;
    box-shadow: 1px 1px 5px #888;
    cursor: pointer;
  }
  .popup-btn-close::after {
    content: 'â†';
    color: #151515;
    position: absolute;
    top: 0;
    left: 0;
    font-size: 20px;
    width: 100%;
    height: 100%;
    line-height: 50px;
    text-align: center;
  }
}
</style>

<div class="popup search-popup local-search-popup">
  <span class="popup-btn-close">
    ESC
  </span>
  <div class="container">
    <div class="col-md-8 col-md-offset-2">
      <div class="local-search-header clearfix">
        <span class="search-icon">
          <i class="fa fa-search"></i>
        </span>
        <div class="local-search-input-wrapper">
          <input autocomplete="off" placeholder="Search..." type="text" id="local-search-input">
        </div>
      </div>
      <div id="local-search-result"></div>
    </div>
  </div>
</div>

<script src="/js/ziploader.js"></script>


  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.json";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').fadeOut(300);
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $('.popup').fadeIn(300);
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // get search zip version
    $.get('/searchVersion.txt?t=' + (+new Date()), function(res) {
      if (localStorage.getItem('searchVersion') !== res) {
        localStorage.setItem('searchVersion', res);
        initSearchJson();
      }
    });

    function initSearchJson () {
      initLoad(['/search.lx'], {
        loadOptions: {
          success: function(obj) {
            localStorage.setItem('searchJson', obj['search.json'])
          },
          error: function(e) {
            return console.log(e)
          }
        },
        returnOptions: {
          'json': TYPE_TEXT
        },
        mimeOptions:{
          'json':'application/json'
        }
      })
    }


    // search function;
    var searchFunc = function(search_id, content_id) {
      'use strict';

      isfetched = true;
      var datas = JSON.parse(localStorage.getItem('searchJson'));
      console.log(search_id)
      var input = document.getElementById(search_id);
      var resultContent = document.getElementById(content_id);
      var inputEventFunction = function() {
        var searchText = input.value.trim().toLowerCase();
        var keywords = searchText.split(/[\s\-]+/);
        if (keywords.length > 1) {
          keywords.push(searchText);
        }
        var resultItems = [];
        if (searchText.length > 0) {
          // perform local searching
          datas.forEach(function(data) {
            var isMatch = false;
            var hitCount = 0;
            var searchTextCount = 0;
            var title = data.title ? data.title.trim() : '';
            var titleInLowerCase = title.toLowerCase();
            var content = data.content ? data.content.trim().replace(/<[^>]+>/g,"") : '';
            var contentInLowerCase = content.toLowerCase();
            var articleUrl = decodeURIComponent(data.url);
            var indexOfTitle = [];
            var indexOfContent = [];
            // only match articles with not empty titles
            keywords.forEach(function(keyword) {
              function getIndexByWord(word, text, caseSensitive) {
                var wordLen = word.length;
                if (wordLen === 0) {
                  return [];
                }
                var startPosition = 0, position = [], index = [];
                if (!caseSensitive) {
                  text = text.toLowerCase();
                  word = word.toLowerCase();
                }
                while ((position = text.indexOf(word, startPosition)) > -1) {
                  index.push({position: position, word: word});
                  startPosition = position + wordLen;
                }
                return index;
              }

              indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
              indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
            });
            if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
              isMatch = true;
              hitCount = indexOfTitle.length + indexOfContent.length;
            }

            // show search results

            if (isMatch) {
              // sort index by position of keyword

              [indexOfTitle, indexOfContent].forEach(function (index) {
                index.sort(function (itemLeft, itemRight) {
                  if (itemRight.position !== itemLeft.position) {
                    return itemRight.position - itemLeft.position;
                  } else {
                    return itemLeft.word.length - itemRight.word.length;
                  }
                });
              });

              // merge hits into slices

              function mergeIntoSlice(text, start, end, index) {
                var item = index[index.length - 1];
                var position = item.position;
                var word = item.word;
                var hits = [];
                var searchTextCountInSlice = 0;
                while (position + word.length <= end && index.length != 0) {
                  if (word === searchText) {
                    searchTextCountInSlice++;
                  }
                  hits.push({position: position, length: word.length});
                  var wordEnd = position + word.length;

                  // move to next position of hit

                  index.pop();
                  while (index.length != 0) {
                    item = index[index.length - 1];
                    position = item.position;
                    word = item.word;
                    if (wordEnd > position) {
                      index.pop();
                    } else {
                      break;
                    }
                  }
                }
                searchTextCount += searchTextCountInSlice;
                return {
                  hits: hits,
                  start: start,
                  end: end,
                  searchTextCount: searchTextCountInSlice
                };
              }

              var slicesOfTitle = [];
              if (indexOfTitle.length != 0) {
                slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
              }

              var slicesOfContent = [];
              while (indexOfContent.length != 0) {
                var item = indexOfContent[indexOfContent.length - 1];
                var position = item.position;
                var word = item.word;
                // cut out 100 characters
                var start = position - 20;
                var end = position + 80;
                if(start < 0){
                  start = 0;
                }
                if (end < position + word.length) {
                  end = position + word.length;
                }
                if(end > content.length){
                  end = content.length;
                }
                slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
              }

              // sort slices in content by search text's count and hits' count

              slicesOfContent.sort(function (sliceLeft, sliceRight) {
                if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                  return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                  return sliceRight.hits.length - sliceLeft.hits.length;
                } else {
                  return sliceLeft.start - sliceRight.start;
                }
              });

              // select top N slices in content

              var upperBound = parseInt('2');
              if (upperBound >= 0) {
                slicesOfContent = slicesOfContent.slice(0, upperBound);
              }

              // highlight title and content

              function highlightKeyword(text, slice) {
                var result = '';
                var prevEnd = slice.start;
                slice.hits.forEach(function (hit) {
                  result += text.substring(prevEnd, hit.position);
                  var end = hit.position + hit.length;
                  result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                  prevEnd = end;
                });
                result += text.substring(prevEnd, slice.end);
                return result;
              }

              var resultItem = '';

              if (slicesOfTitle.length != 0) {
                resultItem += "<li><a target='_blank' href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
              } else {
                resultItem += "<li><a target='_blank' href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
              }

              slicesOfContent.forEach(function (slice) {
                resultItem += "<a target='_blank' href='" + articleUrl + "'>" +
                  "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                  "...</p>" + "</a>";
              });

              resultItem += "</li>";
              resultItems.push({
                item: resultItem,
                searchTextCount: searchTextCount,
                hitCount: hitCount,
                id: resultItems.length
              });
            }
          })
        };
        if (keywords.length === 1 && keywords[0] === "") {
          resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
        } else if (resultItems.length === 0) {
          resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
        } else {
          resultItems.sort(function (resultLeft, resultRight) {
            if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
              return resultRight.searchTextCount - resultLeft.searchTextCount;
            } else if (resultLeft.hitCount !== resultRight.hitCount) {
              return resultRight.hitCount - resultLeft.hitCount;
            } else {
              return resultRight.id - resultLeft.id;
            }
          });
          var searchResultList = '<ul class=\"search-result-list\">';
          resultItems.forEach(function (result) {
            searchResultList += result.item;
          })
          searchResultList += "</ul>";
          resultContent.innerHTML = searchResultList;
        }
      }

      if ('auto' === 'auto') {
        input.addEventListener('input', inputEventFunction);
      } else {
        $('.search-icon').click(inputEventFunction);
        input.addEventListener('keypress', function (event) {
          if (event.keyCode === 13) {
            inputEventFunction();
          }
        });
      }

      // remove loading animation
      $('body').css('overflow', '');

      proceedsearch();
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        $('.sb-close').click();
        searchFunc('local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>


      
</body>
</html>